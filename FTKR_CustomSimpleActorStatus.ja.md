[トップページに戻る](README.ja.md)

# [FTKR_CustomSimpleActorStatus](FTKR_CustomSimpleActorStatus.js) プラグイン

アクターのステータス表示を変更するプラグインです。

ダウンロード: [FTKR_CustomSimpleActorStatus.js](https://raw.githubusercontent.com/futokoro/RPGMaker/master/FTKR_CustomSimpleActorStatus.js)

## 目次

以下の項目の順でプラグインの使い方を説明します。
1. [概要](#概要)
2. [基本設定](#基本設定)
    1. [レイアウトについて](#レイアウトについて)
    2. [表示できるステータス](#表示できるステータス)
3. [簡易ステータス画面の設定](#簡易ステータス画面の設定)
4. [詳細ステータス画面の設定](#詳細ステータス画面の設定)
5. [ステータスの設定](#ステータスの設定)
* [プラグインの更新履歴](#プラグインの更新履歴)
* [拡張プラグイン](#拡張プラグイン)
* [ライセンス](#ライセンス)

## 概要

本プラグインを実装することで、メニューや、スキル画面で表示するアクターのステータス表示のレイアウトを変更できます。

![スキルツリー画面](image/FTKR_CustomSimpleActorStatus/n01_001.png)

[目次に戻る](#目次)

## 基本設定
## レイアウトについて

専用画面は、以下の方法で表示できます。

### メニューから表示

プラグインパラメータ`Enabled Show Command`が 1 であることを確認してください。（デフォルトで設定済み）

![ShowSkillCommand](image/FTKR_CustomSimpleActorStatus/n01_010.png)

この状態の時に、メニュー画面にコマンド「アイテム合成」が表示します。

![メニュー画面](image/FTKR_CustomSimpleActorStatus/n01_001.png)

コマンド「アイテム合成」の表示は、プラグインパラメータ`Command Name`で変更できます。

![CommandName](image/FTKR_CustomSimpleActorStatus/n01_011.png)

また、以下のプラグインパラメータでメニュー欄への表示の有無をスイッチで制御できます。

`Show Menue Switch ID`

0 を指定した場合は、この機能は無効です。
1 以上の値を設定した場合、そのIDのスイッチが ON 状態の時にメニューに表示します。

![CommandName](image/FTKR_CustomSimpleActorStatus/n01_012.png)

### プラグインコマンドを実行
以下のプラグインコマンドを実行することで、画面を表示します。
```
STS Open
STS アイテム合成画面表示
```

[目次に戻る](#目次)

## 表示できるステータス

### 素材から選んで表示できるステータス

合成画面では、下の図のように「アイテム」「武器」「防具」の分類で手持ちのアイテムを表示します。

![画像](image/FTKR_CustomSimpleActorStatus/n01_003.png)

アイテムを選択すると、合成素材に使用する員数を入力します。
入力が終わると、左下の合成アイテムのスロットにアイテムが移動します。

![画像](image/FTKR_CustomSimpleActorStatus/n01_004.png)

合成する素材が決まったら、「合成を行う」コマンドを実行します。
確認画面の有無は、プラグインパラメータで設定できます。

この合成は、レシピを知らなくても実行可能です。
レシピの素材と合っていれば、レシピの有無の関係なく、成功すれば合成アイテムを入手できます。

![画像](image/FTKR_CustomSimpleActorStatus/n01_005.png)

合成実行後は、下の図のような合成結果が表示します。

![画像](image/FTKR_CustomSimpleActorStatus/n01_006.png)

### レシピから選んで表示できるステータス

素材から選ぶだけでなく、レシピから選んで合成することもできます。
コマンド「レシピから選ぶ」を選択すると、右側のアイテム欄が覚えているレシピの表示に変わります。

![画像](image/FTKR_CustomSimpleActorStatus/n01_007.png)

レシピを選択すると、生成する数の設定画面に映ります。
このとき、レシピの素材アイテムが表示します。

![画像](image/FTKR_CustomSimpleActorStatus/n01_008.png)

数の設定が終わると、レシピの素材アイテムがまとめて合成アイテムスロットに移ります。
また、レシピを覚えているため、右側の合成情報に合成時の詳細が表示します。

![画像](image/FTKR_CustomSimpleActorStatus/n01_009.png)

合成実行後については、素材から選ぶ場合と変わりはありません。
なお、下の図のように、合成結果には「成功」だけでなく「大成功」や「失敗」「消失」があります。

図のレシピの場合、大成功時にアイテムランクが上がるように設定しています。
そのため、成功時に「ポーション」だったものが、大成功では「ハイポーション」に変わります。

![画像](image/FTKR_CustomSimpleActorStatus/n01_016.png)

[目次に戻る](#目次)

## アイテム合成時の設定

### アイテム合成時の確認

`<Enable Confirmation>`

アイテム合成実行時に確認画面を表示して、実行するか確認するかを指定します。
 * 1 - 確認する
 * 0 - 確認しない

![EnableConfirmation](image/FTKR_CustomSimpleActorStatus/n01_014.png)

確認する場合は、アイテム合成実行時に下のウィンドウを表示します。

![確認画面](image/FTKR_CustomSimpleActorStatus/n01_005.png)

[目次に戻る](#目次)

## 簡易ステータス画面の設定
## 合成カテゴリーの設定

合成カテゴリーを使用することで、より柔軟なレシピを作成することができます。
レシピに特定のアイテムではなくカテゴリーを指定すると、同じカテゴリーのアイテムであればどのアイテムでも使用できるようになります。

### 合成カテゴリーIDの登録

合成カテゴリーを作成するために、まず「武器タイプ」に合成カテゴリー用のタイプを作成してください。
武器タイプ名を「合成カテゴリー」などと付けると、分かりやすくなると思います。

設定した武器タイプIDは、プラグインパラメータ`Category Type ID`に設定してください。

![スキルツリーIDの登録](image/FTKR_CustomSimpleActorStatus/n02_001.png)

### 合成カテゴリーの作成

合成カテゴリーは、データベースの武器に作成します。

![スキルツリーの設定1](image/FTKR_CustomSimpleActorStatus/n02_004.png)

合成カテゴリーとして設定が必要なデータは以下の通りです。

1. 武器タイプには、先ほど登録した合成カテゴリーIDを選択してください。
2. 武器の名前が合成カテゴリーの名前として画面に表示します。
3. 武器のアイコンが合成カテゴリーのアイコンとして画面に表示します。
4. メモ欄に合成カテゴリー用のノートタグを追加してください。

![スキルツリーの設定2](image/FTKR_CustomSimpleActorStatus/n02_005.png)

合成カテゴリーは、以下のノートタグで設定を行います。

#### アイテム分類の設定
下記のいずれかを入力してください。
設定しない場合は、アイテムと見なします。
```
<ICS アイテム>
<ICS 武器>
<ICS 防具>
```

#### レシピの設定
レシピは、以下の記述で入力します。
レシピの内容については、レシピの設定を参照してください。
```
<ICS レシピ>
内容
</ICS レシピ>
```
このレシピによって出来上がるアイテムは、このレシピを設定した合成カテゴリーに属するアイテムの内、生成後のランクと同じランクのアイテムが選ばれます。

[目次に戻る](#目次)

## アイテムの設定

合成に使用するために、アイテムの設定を行います。
アイテムのメモ欄に合成用のノートタグを追加してください。

![スキルの設定](image/FTKR_CustomSimpleActorStatus/n02_003.png)

#### 合成カテゴリーの設定
以下のノートタグで、カテゴリーを設定できます。
カテゴリー名には、[合成カテゴリーの設定](#カテゴリーの設定)で作成したカテゴリー名を入力してください。
```
<ICS カテゴリー: カテゴリー名>
```


#### ランクの設定
以下のノートタグで、アイテムにランクを設定できます。
```
<ICS ランク: x>
アイテムのランクを x にする。
```
合成後にできるアイテムのランクは、素材に使用したアイテムのランクの平均値です。
ランク 0 のアイテムは、ランク計算には使いません。
このタグを設定しない場合は、ランク 0 と見なします。

#### レシピの設定
レシピは、以下の記述で入力します。
レシピの内容については、レシピの設定を参照してください。
```
<ICS レシピ>
内容
</ICS レシピ>
```

[目次に戻る](#目次)

## レシピの設定

アイテム合成システムを利用するためには、アイテムレシピの設定が必要です。
レシピは、一つのアイテムやカテゴリーに対して複数設定することができます。

レシピは、以下のノートタグで設定を行います。
```
<ICS レシピ>
内容
</ICS レシピ>
```

### 生成数の設定
合成でできあがるアイテムの数を y に設定します。
```
生成数: y
```

### 素材の設定
合成に必要な素材アイテムを設定します。
以下のいずれかの記述で入力してください。
```
アイテム[x]: y
武器[x]: y
防具[x]: y
アイテム名: y
カテゴリー カテゴリー名: y
```
* x - アイテムや武器等のID
* y - 必要な個数

### 合成難易度の設定
合成の難易度を数値で設定します。
成功の難易度が x、大成功が y、失敗が z です。
```
難易度: x, y, z
```

### 成功以外の合成結果の設定
大成功および失敗時の合成アイテムの内容を設定します。
入力しない場合は、発生しません。
例えば、大成功を入力しなければ、大成功しません。
```
大成功: 内容
失敗: 内容
```
以下の内容から選んで入力してください。

* `生成数変更(x)`
    * 生成数を変更します。負の値の場合は減ります。

* `ランク変更(x)`
    * 生成後のアイテムのランクを変更します。負の値の場合は減ります。
    * ランクが減ったことで 0 になる、またはそのランク以下のアイテムが
    ない場合は、何も生成しません。

* `カテゴリー変更(カテゴリー名)`
    * 生成後のアイテムのカテゴリーを変更します。
      変更後のカテゴリーの同ランクのアイテムになります。

* `アイテム変更(アイテム名)`
    * ランクやカテゴリーを無視して、指定したアイテムに変更します。

* `なし`
    * 何も生成しません。生成数を 0 に変更します。

入力例)
```
大成功: 生成数変更(3)
失敗: 生成数変更(1)
大成功の時に生成数が3に、失敗の時に生成数が1になる。
```

#### 合成の必要条件の設定
成功および大成功するために必要な条件を設定します。
この条件に満たない場合は、必ず失敗、または消失になります。
```
必要条件: 条件式
```
#### 条件式 の値について
条件式は、ダメージ計算式のように、計算式を入力することで、固定値以外の値を
使用することができます。以下のコードを使用できます。
* a[x].param - アクターID x のパラメータを参照します。
* s[x]    - スイッチID x の状態を参照します。
* v[x]    - 変数ID x の値を参照します。

[目次に戻る](#目次)

## 詳細ステータス画面の設定

## 合成コマンドの表示設定

合成コマンドで表示するコマンドの表示項目と順番は
プラグインパラメータ`<Command List>`の設定で変更できます。

以下の文字列を入力した順番にコマンドを上から表示します。
入力する文字列は、必ず小文字にしてください。

 * action : 合成を実行するコマンド
 * item   : アイテム分類の選択コマンド
 * weapon : 武器分類の選択コマンド
 * armor  : 防具分類の選択コマンド
 * change : 右側のアイテムウィンドウに、アイテムを表示するか、レシピを表示するか変えるコマンド
 * slot   : 素材スロットのアイテムを戻すコマンド
 * end    : 合成を止めるコマンド

![画像](image/FTKR_CustomSimpleActorStatus/n03_001.png)

[目次に戻る](#目次)

## プラグインコマンド

### アイテム合成画面表示
```
STS Open
STS アイテム合成画面表示
```

### レシピを追加
```
ICS ADD_RECIPE ITEMNAME RecipeId
ICS ADD_RECIPE ITEM ItemId RecipeId 
ICS レシピ追加 アイテム名 レシピID
ICS レシピ追加 アイテム アイテムID レシピID
```
'アイテム'部は、武器の場合は'武器'、防具の場合は'防具'と入力します。
指定したアイテムのレシピを覚えます。

アイテム名や、アイテム、アイテムID部に、v[n]と入力することで、
ゲーム内変数ID n の内容を参照できます。
レシピIDを入力しない場合は、指定したアイテムの1つめのレシピになります。

入力例) アイテムID11 がポーションの場合、以下は同じ結果になります。
```
ICS レシピ追加 ポーション 1
ICS レシピ追加 アイテム 11 1
```

### レシピを削除
```
ICS REDUCE_RECIPE ITEMNAME RecipeId
ICS REDUCE_RECIPE ITEM ItemId RecipeId
ICS レシピ削除 アイテム名 レシピID
ICS レシピ削除 アイテム アイテムID レシピID
```
'アイテム'部は、武器の場合は'武器'、防具の場合は'防具'と入力します。
指定したアイテムのレシピを忘れます。

アイテム名や、アイテム、アイテムID部に、v[n]と入力することで、
ゲーム内変数ID n の内容を参照できます。
レシピIDを入力しない場合は、指定したアイテムの1つめのレシピになります。

[目次に戻る](#目次)

## プラグインの更新履歴

| バージョン | 公開日 | 更新内容 |
| --- | --- | --- |
| [ver0.9.0](FTKR_ItemCompositionSystem.js) | 2017/04/08 | 試作版公開 |

## ライセンス

本プラグインはMITライセンスのもとで公開しています。

[The MIT License (MIT)](https://opensource.org/licenses/mit-license.php)

#
[目次に戻る](#目次)

[トップページに戻る](README.ja.md)
[トップページに戻る](README.ja.md)

# [FTKR_SkillTreeSystem](FTKR_SkillTreeSystem.js) プラグイン

ツリー型のスキル習得システムを実装するプラグインです。

ダウンロード: [FTKR_SkillTreeSystem.js](https://raw.githubusercontent.com/futokoro/RPGMaker/master/FTKR_SkillTreeSystem.js)

## 概要

本プラグインにより、スキル習得システムの専用画面を表示し、視覚的にスキルを習得することができるようになります。

![スキルツリー画面](image/FTKR_SkillTreeSystem_n01_001.png)

専用画面は、以下の方法で表示できます。

1. プラグインパラメータ<Show Skill Command>が 1 の時にメニュー画面のコマンドから表示

![メニュー画面](image/FTKR_SkillTreeSystem_n01_002.png)

2. プラグインコマンドを実行
```
<STS Open>
<STS スキルツリー画面表示>
```

また、アクター毎にスキル習得時に使用できるスキルポイント(SP)を実装します。

## スキルツリーの設定方法

ツリー型のスキル習得システムを利用するために、まずスキルツリーの設定が
必要です。

### スキルツリーIDの登録

スキルツリーを作成するために、まず「武器タイプ」にスキルツリー用のタイプを
作成してください。
武器タイプ名を「スキルツリー」などと付けると、分かりやすくなると思います。

![スキルツリーIDの登録](image/FTKR_SkillTreeSystem_v1_6_0_N02_img001.jpg)

**********************************************************************
スキルツリー用のIDを設定したら、プラグインパラメータ<Skill Tree Id>に、
そのIDを必ず登録してください。
**********************************************************************

### スキルツリーの作成

スキルツリーは、データベースの武器に作成します。
武器タイプには、先ほど登録したスキルツリーIDを選択ししてください。
武器の名前がスキルツリーの名前に、武器のアイコンがスキルツリーのアイコン
として画面に表示されます。
また、作成した武器のIDが、後述のツリータイプIDになります。

![スキルツリーの設定](image/FTKR_SkillTreeSystem_v1_6_0_N02_img002.jpg)

スキルツリーは、以下のノートタグで設定を行います。

```
<Set Sts Data>
code
</Set Sts Data>
```

[code に使用できる項目]
skill: x1,x2,...
   :スキルツリーの起点となるスキルとして、ID x1,x2,...を
   :登録します。複数のIDを登録することで、複数の起点を持った
   :ツリーにすることができます。
   :なお、IDの代わりに'0'を入力すると、その箇所はツリー上で
   :空欄になります。

required: eval
   :スキルツリーの表示条件を eval に設定します。

image index: y
   :後述の枠画像の表示番号を y に設定します。
image index on cursor: y
   :後述のカーソルと重なったときの枠画像の表示番号を y に設定します。

[eval の値について]
eval部は、ダメージ計算式のように、計算式を入力することで、固定値以外の値を
使用することができます。以下のコードを使用できます。
 a.param - 使用者のパラメータを参照します。(a.atk で使用者の攻撃力)
 s[x]    - スイッチID x の状態を参照します。
 v[x]    - 変数ID x の値を参照します。

## スキルの設定

スキルツリーを作成した後に、ツリーを構成するスキルの設定を行います。
ツリーを構成させる各スキルに対して、以下のノートタグを入力します。

![スキルの設定](image/FTKR_SkillTreeSystem_v1_6_0_N02_img003.jpg)

```
<Set Sts Data>
code
</Set Sts Data>
```

[code に使用できる項目]
skill: y1,y2,...
tree x skill: y1,y2,...
   :そのスキルから派生するスキルとして、スキルID y1,y2,...を
   :登録します。tree x を加えた場合は、スキルツリーID x に対する
   :派生先として登録します。
   :tree 0 skill: y1,y2,...と、skill: y1,y2,...の意味は同じです。
   :なお、複数のスキルから同じスキルに派生するように
   :設定した場合、派生元のスキルをすべて習得しなければ、その派生
   :スキルは、習得できません。
例)
1.スキルAの派生スキルにスキルCを登録
2.スキルBの派生スキルにスキルCを登録
⇒この場合、スキルCを習得するために、スキルAとスキルBをどちらも
  習得しなければいけない

required: eval
   :スキルの習得条件を eval に設定します。

cost sp: eval
   :習得に必要なSP を eval に設定します。
cost item[x]: eval
   :習得に必要なアイテムID x を eval 個に設定します。
cost weapon[x]: eval
   :習得に必要な武器ID x を eval 個に設定します。
cost armor[x]: eval
   :習得に必要な防具ID x を eval 個に設定します。
cost v[x]: eval
   :習得に必要な変数ID x の値を eval に設定します。
cost gold: eval
   :習得に必要なお金を eval に設定します。

max count: y
   :最大習得回数を y に設定します。
image index: y
   :スキル枠画像の表示番号を y に設定します。(*1)
image index on cursor: y
   :カーソルと重なったときのスキル枠画像の表示番号を y に設定します。(*1)

(*1)これらのタグを有効にするためには、FTKR_DisplayCommandFrame.jsが
    必要です。また、<Skill Frame Type>を 3~5のいずれかに設定する
    必要があります。


[eval の値について]
eval部は、ダメージ計算式のように、計算式を入力することで、固定値以外の値を
使用することができます。以下のコードを使用できます。
 a.param - 使用者のパラメータを参照します。(a.atk で使用者の攻撃力)
 s[x]    - スイッチID x の状態を参照します。
 v[x]    - 変数ID x の値を参照します。


[スキルツリーの作成における注意事項]
1つのスキルツリーの中で、同じスキルを重複して使用することはできません。
スキルが重複した場合、ツリーの終点に近い方を登録します。


## スキルツリーをアクターとクラスに登録する

作成したスキルツリーは、アクター、またはクラスに、以下のノートタグを
入力することで、使用できます。

![スキルツリーの登録](image/FTKR_SkillTreeSystem_v1_6_0_N02_img003.jpg)

```
<Set Sts Data>
code
</Set Sts Data>
```

[code に使用できる項目]
TreeType: x1,x2,...
   :そのアクター、またはクラスは、ツリータイプID x1,x2,...を
   :使用できます。
   :ツリータイプIDとは、ツリーとして作成した武器のIDです。

Init Sp: x
   :アクターの初期SPを x に設定します。


## 更新履歴

| バージョン | 公開日 | 必須ライブラリ | 更新内容 |
| --- | --- | --- | --- |
| [ver1.6.3](FTKR_SkillTreeSystem.js) | 2016/04/07 | なし | 公開 |


## ライセンス

本プラグインはMITライセンスのもとで公開しています。
[The MIT License (MIT)](https://opensource.org/licenses/mit-license.php)


#
[トップページに戻る](README.ja.md)
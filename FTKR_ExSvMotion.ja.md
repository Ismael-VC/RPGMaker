[トップページに戻る](README.md)

# [FTKR_ExSvMotion](FTKR_ExSvMotion.js) プラグイン

SVキャラのモーションを拡張するプラグインです。

ダウンロード: [FTKR_ExSvMotion.js](https://raw.githubusercontent.com/futokoro/RPGMaker/master/FTKR_ExSvMotion.js)

## 目次

以下の項目の順でプラグインの使い方を説明します。
1. [概要](#概要)
2. [プラグインの登録](#プラグインの登録)
2. [行動モーションの設定](#行動モーションの設定)
2. [状態モーションの設定](#状態モーションの設定)
3. [ステートモーションの設定](#ステートモーションの設定)
3. [スキル・アイテムに個別でモーションを設定](#スキル・アイテムに個別でモーションを設定)
* [プラグインの更新履歴](#プラグインの更新履歴)
* [拡張プラグイン](#拡張プラグイン)
* [ライセンス](#ライセンス)

## 概要

本プラグインを実装することで、アクターのさまざまな状態におけるSVキャラのモーションを変更します。

## プラグインの登録

以下のプラグインと組み合わせて使用する場合は。
プラグイン管理画面で、以下の順の配置になるように登録してください。
```
YEP_BattleEngineCore.js
YEP_X_AnimatedSVEnemies.js
YED_SideviewBattler.js
FTKR_ExSvMotion.js
```

## 行動モーションの設定

アクターの非ダメージ時や、攻撃時など行動時におけるモーション設定します。
設定可能なモーションは以下の通りです。

被ダメージ、回避、突き、払い、飛び道具、スキル、魔法、アイテム、回復時

プラグインパラメータの行動モーションの設定で、[コード名](Code_List.ja.md#モーション)から指定してください。

コードに`custom*`と入力することで、カスタムモーションを使用できます。<br>
コードに`other*`と入力することで、別画像モーションを使用できます。

### カスタムモーションについて
`custom*`(* は数字)で指定するモーションは、本プラグインで新規に設定可能な
モーションです。

以下のプラグインパラメータで表示するモーションのコードを設定することで複数のモーションを連続して表示させることができます。
カスタムモーションは、8個まで設定できます。

`<CustomNon * Loop>`<br>
このパラメータに設定したコードのモーションはループしません。

`<Custom * Loop>`<br>
このパラメータに設定したコードのモーションをループさせます。

モーションのコードは、カンマ(,)を使うことで複数入力できます。

### モーションのループについて

`<Custom * Loop>`に設定したモーションをループさせます。
複数のコードを入力した場合も、それらを順に表示してループします。

### 設定例
```
<CustomNon 1 Loop> :victory, skill
<Custom 1 Loop>    :item, walk
```
上記のように設定した場合、以下の順番でモーションを表示します。

```
victory ⇒ skill ⇒ item ⇒ walk ⇒ item ⇒ walk ⇒ ...
                 |→ここからループ
```

### 別画像モーションについて
other* (* は数字)で指定するモーションは、本プラグインで新規に設定可能なアクター専用のモーションです。

データベースのアクターの「画像」設定で選択したSV戦闘キャラ画像以外の画像を使用することができます。

使用する画像は、アクターのメモ欄に以下のタグで設定します。
```
<ESM_画像:filename>
<ESM_IMAGE:filename>
```

画像ファイル filename.png は img/sv_actors/ に保存してください。
使用できる画像規格は、SV戦闘キャラ画像と同じです。

other*の *番号は、画像内のどの位置のモーションを使用するか設定する番号です。
3枚で1セットで左上のモーションを0番、一つ下を1番、一つ右を6番として数えます。
other0 ~ other17 まで使用できます。

なお、各別画像モーションはループしません。
カスタムモーションに使用した場合は、カスタムモーションの設定に従います。

[目次に戻る](#目次)

## 状態モーションの設定

モーションは、モーション1～モーション16まで設定できます。
数字が大きい方が、モーションの優先度が高くなります。

デフォルトの設定は以下の通りです。

| モーション番号 | 名称 | 状態(Condition) | コード名(Name) |
| --- | --- | --- | --- |
| 1 | 瀕死時 | dying | dying |
| 2 | 状態異常中 | state1 | abnormal |
| 3 | 防御中 | guard | guard |
| 4 | 詠唱中 | chant | chant |
| 5 | 睡眠中 | state2 | sleep |
| 6 | 空き |  |  |
| 7 | 空き |  |  |
| 8 | 戦闘不能中 | state3 | dead |
| 9 | コマンド入力中 | input | walk |
| 10 | 戦闘勝利時 | victory | victory |
| 11 | 逃走時 | escape | escape |
| 12 | 空き |  |  |
| 13 | 空き |  |  |
| 14 | 空き |  |  |
| 15 | 空き |  |  |
| 16 | 空き |  |  |

### モーションの状態の設定

`<Motion * Condition>`

モーションの状態を設定します。
以下の状態の中から、モーションを設定する対象を選択します。
* input   : コマンド入力中
* chant   : 詠唱中
* guard   : 防御中/防御待機中
* state*  : ステート付加中(state + ステートモーション番号)(例:state4)
* victory : 戦闘勝利中
* escape  : 逃走中
* dying   : 瀕死時
* custom* : カスタムコンディション(custom + カスタムコンディション番号)(例:custom1)

ステートモーション番号の 1 ~ 3は、基本設定で選べる以下の状態を示します。
* 1 - 状態異常
* 2 - 睡眠
* 3 - 戦闘不能

### モーションのコードの設定

`<Motion * Name>`

`<Motion * Condition>`で設定したアクターの状態の時に表示するモーションの[コード名](Code_List.ja.md#モーション)を指定してください。<br>
ステートモーションに設定したモーションは、ループします。<br>
カスタムモーションを使用できます。

状態モーションのプラグインパラメータ<Motion * Condition>に設定できる
独自条件を設定できます。

### カスタムコンディションの設定

状態モーションに使用できる状態として、独自の条件式を設定することができます。
プラグインパラメータ`<Custom Condition *>` にJS条件式を入力してください。

[条件式 の値について]
条件式は、ダメージ計算式のように、計算式を入力することで、固定値以外の値を使用することができます。
以下のコードを使用できます。
* a.param - 使用者のパラメータを参照します。(a.hit で使用者の命中率)
* v[x]    - 変数ID x の値を参照します。
* s[x]    - スイッチID x の値を参照します。

[目次に戻る](#目次)

## ステートモーションの設定
ステートのメモ欄に以下のタグを入力することで、ステート付加中のモーションを
設定できます。

```
<ESM モーション: x>
<ESM MOTION: x>
```
ステートモーション番号を x に設定します。
タグで設定しない場合は、基本設定の[SV]モーションの設定に従います。

[目次に戻る](#目次)

## スキル・アイテムに個別でモーションを設定
スキル、アイテムのメモ欄に以下のタグを設定すると、使用時のモーションを変更することができます。
```
<ESM モーション: name>
<ESM MOTION: name>
```
使用時のモーションを name に変更します。
name にはモーションのコードを設定してください。

```
<ESM 武器モーション>
<ESM WEAPON_MOTION>
```
このタグがあると、手持ちの武器付きのモーションになります。

[目次に戻る](#目次)

## プラグインの更新履歴

| バージョン | 公開日 | 更新内容 |
| --- | --- | --- |
| [ver1.2.3](FTKR_ExSvMotion.js) | 2017/05/19 | 防御モーションの優先度が反映されない不具合を修正 |
| ver1.2.2 | 2017/05/11 | 余計なログを出力する箇所を削除<br>FTKR_FacialImageDifferenceのv1.0.1に対応 |
| ver1.2.1 | 2017/05/10 | FTKR_FacialImageDifferenceの対応が不十分だった箇所を修正 |
| ver1.2.0 | 2017/05/09 | 別のSV画像を使用したモーションを設定する機能を追加<br>スキル・アイテムの使用モーションを個別に設定する機能を追加<br>HP回復時のモーションを設定する機能を追加<br>状態モーションに独自条件を設定するカスタムコンディションの機能を追加 |
| ver1.1.5 | 2017/05/06 | ステートモーションタグが設定されていない場合に、ステートのモーションを正しく反映できない不具合を修正 |
| ver1.1.4 | 2017/04/30 | YED_SideviewBattlerの対応が不十分だった箇所を修正 |
| ver1.1.3 | 2017/04/27 | requestMotion()に関する不具合修正<br>YED_SideviewBattlerに対応<br>YEP_X_AnimatedSVEnemiesに対応 |
| ver1.1.2 | 2017/04/27 | 状態モーション10以降が反映されない不具合修正 |
| ver1.1.1 | 2017/04/26 | YEP_BattleEngineCoreに対応 |
| ver1.1.0 | 2017/04/25 | 攻撃等の行動モーションを変更する機能を追加<br>状態モーションに、戦闘勝利、逃走、瀕死時のモーションを追加<br>状態モーションのデフォルト設定を見直し<br>複数のモーションを組み合わせて連続で表示する機能を追加 |
| ver1.0.1 | 2017/04/21 | ステートのメモ欄が正しく読み取れない不具合修正 |
| ver1.0.0 | 2017/04/19 | 初版公開 |

## 拡張プラグイン

以下のプラグインを使用することで、本プラグインの機能を拡張できます。

* [FTKR_FacialImageDifference.js](FTKR_FacialImageDifference.ja.md) - メニュー画面等で表示する顔画像をアクターの状態で変更できます。

## ライセンス

本プラグインはMITライセンスのもとで公開しています。

[The MIT License (MIT)](https://opensource.org/licenses/mit-license.php)

#
[目次に戻る](#目次)

[トップページに戻る](README.md)